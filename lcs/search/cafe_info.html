<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>카패 통합정보 페이지</title>
    <!-- Axios 라이브러리를 사용하기 위한 Api호출 -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.0/axios.min.js"></script>
  </head>

  <link href="/lcs/com/css/cafe_info.css" rel="stylesheet" type="text/css" />
  <body>
    <div id="content">
      <!-- <div id="cafe_logo">이미지</div> -->
      <div id="cafename_box">
        <div id="cafeName">
          <h1></h1>
        </div>
      </div>
      <div id="table_state">
        <!-- <p>빈 테이블 수 / 총 테이블 수</p> -->
        <!-- 층마다 테이블수 표시 -->
        <div id="tableInfo"></div>
      </div>
      <!--  정보 뭉텅이 -->
      <div>
        <!-- 연락처 -->
        <hr id="hr_line" />
        <div id="cafePhone"></div>
        <hr id="hr_line" />
        <!-- 카페주소 -->
        <div id="cafeAddr"></div>
        <hr id="hr_line" />
        <!-- 카페 영업시간 -->
        <div id="cafeTime"></div>
        <hr id="hr_line" />
        <!-- 카페 총 테이블수 -->
        <div id="cafeAllSeat"></div>
        <hr id="hr_line" />
      </div>
    </div>
    <script>
      let temp;
      let data = [];
      let i = 0;

      temp = location.href.split("?");
      console.log(`temp값:${temp}`);

      test = temp[1].split("&");
      console.log(`test값:${test}`);

      name = test[0];
      console.log("카페명:" + name);

      phone = test[1];
      console.log("카페연락처:" + phone);

      addr = test[2];
      console.log("카페 주소:" + addr);

      openTime = test[3];
      console.log("오픈시간:" + openTime);

      closeTime = test[4];
      console.log("마감시간:" + closeTime);

      table = test[5];
      console.log("총 테이블:" + table);

      floor = test[6];
      console.log("층 수:" + floor);

      //층별 사용하는 자릿수
      floorSeat = test[7];
      console.log("층 별 사용하는 자리수:" + floorSeat);
      toArray = floorSeat.split(",");
      console.log(typeof floorSeat);
      console.log(toArray);

      //층별 총 테이블 수
      totalSeat = test[8];
      console.log("층별 총 테이블 수 " + totalSeat);
      totalSeatArray = totalSeat.split(",");
      console.log(typeof floorSeat);
      console.log(totalSeatArray);

      cafeName = document.getElementById("cafeName");
      cafeName.innerHTML = "<h1>" + decodeURI(name) + "</h1>";

      cafePhone = document.getElementById("cafePhone");
      cafePhone.innerHTML = "<p>연락처 : " + phone + "</p>";

      cafeAddr = document.getElementById("cafeAddr");
      cafeAddr.innerHTML = "<p>주소 : " + decodeURI(addr) + "</p>";

      cafeOpenTime = document.getElementById("cafeTime");
      cafeOpenTime.innerHTML =
        " <p>영업시간 : " + openTime + " ~ " + closeTime + "</p>";


      cafeAllSeat = document.getElementById("cafeAllSeat");
      cafeAllSeat.innerHTML = "<p>총 테이블 수 : " + table + "</p>";

      tableInfo = document.getElementById("tableInfo");

      for (i = 0; i < floor; i++) {
        tableInfo.innerHTML +=
          "<p>" +
          (i + 1) +
          "층 " +
          "사용중 : " +
          (totalSeatArray[i] - toArray[i]) +
          " / " +
          "전체 테이블 : " +
          totalSeatArray[i] +
          "</p>";
      }
    </script>
  </body>
</html>
